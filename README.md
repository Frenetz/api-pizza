# REST API для сайта по продаже пиццы

Данный репозиторий содержит исходный код и документацию для REST API, разработанного для сайта по продаже пиццы. API предоставляет возможность управления пользователями, адресами, категориями товаров, способами доставки, способами оплаты, товарами и заказами. Проект использует Laravel для серверной части и OpenAPI (Swagger) для документации.

## Структура проекта

Проект разбит на следующие каталоги и файлы:

- **app**: Содержит основные файлы приложения Laravel, включая контроллеры, модели, миграции и роутинг.
- **database**: Здесь находятся миграции и сидеры для базы данных.
- **routes**: Включает файлы с определением маршрутов для API.
- **public**: Публичные ресурсы, такие как изображения и стили.
- **tests**: Тесты для API.
- **storage**: Хранилище для загруженных файлов, логов и временных данных.
- **resources**: Шаблоны и представления.
- **config**: Конфигурационные файлы Laravel.
- **vendor**: Зависимости и библиотеки, устанавливаемые Composer.
- **.env**: Файл окружения с настройками (не включен в репозиторий).
- **swagger.yaml**: Файл с OpenAPI спецификацией.

## Технологии

Проект разработан с использованием следующих технологий и инструментов:

- Laravel: PHP-фреймворк для разработки веб-приложений.
- Composer: Пакетный менеджер для PHP.
- OpenAPI и Swagger: Для документации API.
- PHPUnit: Для написания и запуска тестов.
- PostgreSQL: СУБД для хранения данных.
- SQLite: СУБД для хранения тестовых данных

## Аутентификация и Роли

### Аутентификация

Для аутентификации пользователей в нашем API мы используем Laravel Sanctum. Sanctum предоставляет надежную аутентификацию с использованием токенов, что позволяет пользователям регистрироваться, входить в систему и получать доступ к защищенным ресурсам.

Для регистрации нового пользователя отправьте POST-запрос на `/register`, предоставив необходимые данные.

```http
POST /register
{
    "name": "Имя",
    "email": "example@example.com",
    "password": "ваш_пароль",
    "surname": "Фамилия",
    "patronymic": "Отчество",
    "phone": "ваш_телефон",
    "date_of_birth": "дата_рождения"
}
```

После успешной регистрации вы получите токен доступа, который необходим для аутентификации в дальнейшем.

### Система Ролей

Для определения ролей пользователей и управления доступом к различным частям API мы используем Laravel Spatie. Система ролей предоставляет следующие роли:

- **Администратор (Admin)**: Пользователи с этой ролью имеют полный доступ ко всем ресурсам API.
- **Клиент (Client)**: Зарегистрированные пользователи, которые имеют доступ к определенным ресурсам (например, создание заказов).
- **Гость (Guest)**: Пользователи, которые не прошли аутентификацию, могут ограниченно взаимодействовать с API.

## Установка и запуск

1. Клонируйте репозиторий на свой локальный компьютер:

   ```bash
   git clone https://github.com/Frenetz/api-pizza.git
   cd api-pizza
   ```

2. Установите зависимости с помощью Composer:

   ```bash
   composer install
   ```

3. Создайте файл окружения `.env` на основе `.env.example` и укажите настройки базы данных.

4. Выполните миграции и заполните базу данных:

   ```bash
   php artisan migrate
   php artisan db:seed --class=RoleSeeder
   ```
*RoleSeeder - сидер для наполнения БД ролями пользователей

5. Запустите веб-сервер:

   ```bash
   php artisan serve
   ```

## Использование API

Документация API доступна через Swagger UI. Вы можете зарегистрироваться, авторизоваться и использовать различные точки API в соответствии с вашей ролью (администратор, клиент, гость).

## Тестирование

Проект включает набор тестов, которые можно запустить с помощью PHPUnit. Для запуска тестов используйте команду:

```bash
php artisan test
```
Конечно, давайте дополним шаблон README.md, чтобы включить информацию о аутентификации с использованием Laravel Sanctum и системе ролей через Laravel Spatie:

```markdown
